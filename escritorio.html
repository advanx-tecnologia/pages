<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanx IA - Estrat√©gia SIC</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Cor de sele√ß√£o personalizada */
        ::selection {
            background-color: #ff7a01;
            color: white;
        }

        /* Anima√ß√µes utilit√°rias */
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
            opacity: 0;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Estilo do Range Input */
        input[type=range] {
            -webkit-appearance: none; 
            background: transparent; 
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #ff7a01;
            cursor: pointer;
            margin-top: -8px; 
            box-shadow: 0 0 10px rgba(255,122,1,0.5);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #333;
            border-radius: 2px;
        }
    </style>

    <!-- Scripts de Rastreamento (Placeholders) -->
    <script>
        // Inicializa fila de eventos se n√£o existir (evita erros se bloqueadores estiverem ativos)
        window.fbq = window.fbq || function() {};
        window.gtag = window.gtag || function() {};

        function trackEvent(eventName, params = {}) {
            console.log(`üì° Evento: ${eventName}`, params);
            if (window.fbq) window.fbq('track', eventName, params);
            if (window.gtag) window.gtag('event', eventName, params);
        }
    </script>
</head>
<body class="bg-[#0A0A0A] text-gray-300 pb-20 md:pb-0">

    <!-- HEADER DISCRETO -->
    <div class="flex justify-center py-2 bg-[#121212] border-b border-[#222]">
        <div class="flex items-center gap-2 text-[10px] uppercase tracking-widest text-gray-600">
            <i data-lucide="lock" class="w-3 h-3"></i> Documento Seguro Advanx IA
        </div>
    </div>

    <main class="max-w-4xl mx-auto my-4 md:my-12 px-2 md:px-0">
        <div class="bg-[#161616] border border-[#262626] shadow-2xl min-h-screen p-6 md:p-16 relative overflow-hidden rounded-sm md:rounded-lg">
            
            <!-- Marca d'√°gua -->
            <div class="absolute top-6 right-6 flex flex-col items-end opacity-10 pointer-events-none z-0">
                <span class="text-xs font-black tracking-[0.3em] text-white">CONFIDENCIAL</span>
                <span class="text-[10px] text-gray-500 uppercase">Acesso Restrito // Advanx IA</span>
            </div>

            <!-- HEADLINE / PROMESSA -->
            <section class="mb-16 relative z-10 mt-16 md:mt-20">
                <h1 class="text-3xl md:text-5xl font-black text-white leading-tight md:leading-tight mb-12 tracking-tight">
                    CONTRATOS FECHADOS EM AT√â 41 DIAS.
                </h1>
                
                <p class="text-lg md:text-xl text-gray-400 font-medium mb-10 border-l-4 border-[#ff7a01] pl-6 py-4 leading-relaxed bg-[#1E1E1E]/50 rounded-r-lg shadow-lg">
                    Garantido. Ou voc√™ fica isento da mensalidade.
                </p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-12">
                    <div class="flex items-center gap-4 bg-[#1E1E1E] p-4 md:p-5 rounded-lg border border-[#2A2A2A] hover:border-[#ff7a01]/30 transition-colors group">
                        <i data-lucide="x-circle" class="text-red-500/80"></i>
                        <span class="font-bold text-gray-200 text-lg group-hover:text-white transition-colors">N√£o √© lead.</span>
                    </div>
                    <div class="flex items-center gap-4 bg-[#1E1E1E] p-4 md:p-5 rounded-lg border border-[#2A2A2A] hover:border-[#ff7a01]/30 transition-colors group">
                        <i data-lucide="x-circle" class="text-red-500/80"></i>
                        <span class="font-bold text-gray-200 text-lg group-hover:text-white transition-colors">N√£o √© reuni√£o.</span>
                    </div>
                    <div class="flex items-center gap-4 bg-[#1E1E1E] p-4 md:p-5 rounded-lg border border-[#2A2A2A] hover:border-[#ff7a01]/30 transition-colors group">
                        <i data-lucide="x-circle" class="text-red-500/80"></i>
                        <span class="font-bold text-gray-200 text-lg group-hover:text-white transition-colors">N√£o √© ‚Äúmovimento‚Äù.</span>
                    </div>
                    <div class="flex items-center gap-4 bg-[#1E1E1E] p-4 md:p-5 rounded-lg border border-[#2A2A2A] hover:border-[#ff7a01]/30 transition-colors group">
                        <i data-lucide="check-circle-2" class="text-green-500"></i>
                        <span class="font-bold text-gray-200 text-lg group-hover:text-white transition-colors">√â contrato assinado.</span>
                    </div>
                </div>

                <div class="prose prose-invert prose-lg max-w-none text-gray-400 space-y-6">
                    <p>Se em at√© 41 dias o seu escrit√≥rio n√£o estiver fechando novos contratos atrav√©s do nosso sistema, voc√™ n√£o paga a mensalidade.</p>
                    <div class="flex flex-wrap gap-6 text-xs font-bold text-gray-500 uppercase tracking-widest">
                        <span>// Sem risco</span>
                        <span>// Sem desculpa</span>
                        <span>// Sem ambiguidade</span>
                    </div>
                </div>
            </section>

            <!-- FOTO ANTES DO SIC -->
            <div class="mb-12 relative group rounded-xl overflow-hidden border border-[#333]">
                <div class="absolute inset-0 bg-[#ff7a01]/10 mix-blend-overlay z-10"></div>
                <img 
                  src="https://lhbwfbquxkutcyqazpnw.supabase.co/storage/v1/object/public/images/outro/eu-escritorio.webp" 
                  alt="Advanx IA Office" 
                  loading="lazy"
                  width="800"
                  height="400"
                  class="w-full h-64 md:h-96 object-cover object-top grayscale group-hover:grayscale-0 transition-all duration-700"
                />
            </div>

            <!-- SIC SECTION -->
            <section class="mb-16 py-8 border-t border-[#262626]">
                <h2 class="text-2xl font-bold text-white mb-6">SIC ‚Äî Sistema de Capta√ß√£o Inteligente</h2>
                <p class="text-gray-400 mb-8 text-lg">
                    A Advanx IA implementa no seu escrit√≥rio um mecanismo propriet√°rio: <strong class="text-white">SIC ‚Äî Sistema de Capta√ß√£o Inteligente.</strong>
                </p>
                <p class="text-gray-400 mb-8">Ele integra:</p>

                <div class="space-y-4 mb-10">
                    <div class="flex gap-4 items-center group"><div class="w-6 h-6 rounded bg-[#ff7a01]/10 text-[#ff7a01] flex items-center justify-center border border-[#ff7a01]/30 group-hover:bg-[#ff7a01] group-hover:text-white transition-colors"><i data-lucide="check-circle-2" class="w-3.5 h-3.5"></i></div><span class="text-gray-300 font-medium group-hover:text-white transition-colors">Capta√ß√£o estruturada</span></div>
                    <div class="flex gap-4 items-center group"><div class="w-6 h-6 rounded bg-[#ff7a01]/10 text-[#ff7a01] flex items-center justify-center border border-[#ff7a01]/30 group-hover:bg-[#ff7a01] group-hover:text-white transition-colors"><i data-lucide="check-circle-2" class="w-3.5 h-3.5"></i></div><span class="text-gray-300 font-medium group-hover:text-white transition-colors">Atendimento imediato com Intelig√™ncia Artificial</span></div>
                    <div class="flex gap-4 items-center group"><div class="w-6 h-6 rounded bg-[#ff7a01]/10 text-[#ff7a01] flex items-center justify-center border border-[#ff7a01]/30 group-hover:bg-[#ff7a01] group-hover:text-white transition-colors"><i data-lucide="check-circle-2" class="w-3.5 h-3.5"></i></div><span class="text-gray-300 font-medium group-hover:text-white transition-colors">Qualifica√ß√£o estrat√©gica</span></div>
                    <div class="flex gap-4 items-center group"><div class="w-6 h-6 rounded bg-[#ff7a01]/10 text-[#ff7a01] flex items-center justify-center border border-[#ff7a01]/30 group-hover:bg-[#ff7a01] group-hover:text-white transition-colors"><i data-lucide="check-circle-2" class="w-3.5 h-3.5"></i></div><span class="text-gray-300 font-medium group-hover:text-white transition-colors">Condu√ß√£o at√© a decis√£o</span></div>
                    <div class="flex gap-4 items-center group"><div class="w-6 h-6 rounded bg-[#ff7a01]/10 text-[#ff7a01] flex items-center justify-center border border-[#ff7a01]/30 group-hover:bg-[#ff7a01] group-hover:text-white transition-colors"><i data-lucide="check-circle-2" class="w-3.5 h-3.5"></i></div><span class="text-gray-300 font-medium group-hover:text-white transition-colors">CRM pr√≥prio integrado com controle total do funil</span></div>
                </div>

                <div class="p-6 bg-[#1A1A1A] border-l-2 border-[#ff7a01] rounded-r-lg">
                    <p class="text-gray-300 text-lg italic">
                        "O que antes era disperso, agora opera como um sistema √∫nico. <br/>
                        <span class="text-[#ff7a01] font-bold not-italic mt-2 block">E sistema gera previsibilidade."</span>
                    </p>
                </div>
            </section>

            <!-- O PROBLEMA -->
            <section class="mb-16 space-y-8 text-gray-400 text-lg leading-relaxed">
                <h3 class="text-xl font-bold text-white">Se voc√™ j√° investiu em marketing e n√£o teve resultado‚Ä¶</h3>
                <p>O problema n√£o foi investir. O problema foi n√£o ter um <strong class="text-white">mecanismo completo de condu√ß√£o at√© o fechamento.</strong></p>
                <p>Muitos escrit√≥rios geram interesse. Poucos controlam o processo.</p>
                
                <div class="grid md:grid-cols-3 gap-4 text-sm my-8">
                   <div class="bg-[#1E1E1E] p-4 rounded border border-red-900/30 text-red-200/80 hover:border-red-500/50 transition-colors">Sem estrutura, o lead esfria.</div>
                   <div class="bg-[#1E1E1E] p-4 rounded border border-red-900/30 text-red-200/80 hover:border-red-500/50 transition-colors">Sem intelig√™ncia de qualifica√ß√£o, o tempo √© desperdi√ßado.</div>
                   <div class="bg-[#1E1E1E] p-4 rounded border border-red-900/30 text-red-200/80 hover:border-red-500/50 transition-colors">Sem condu√ß√£o estrat√©gica, a decis√£o n√£o acontece.</div>
                </div>

                <p>O SIC elimina essas quebras.</p>
                <p>Se voc√™ recebe muitos leads e fecha pouco‚Ä¶ <br/><strong class="text-white">Isso n√£o √© normal.</strong> √â sintoma de aus√™ncia de engenharia comercial.</p>
            </section>

            <!-- CALCULADORA DE PERDA OCULTA -->
            <section class="mb-16">
                <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2">
                    <i data-lucide="trending-up" class="text-[#ff7a01]"></i> C√°lculo de Perda Oculta
                </h2>
                <div class="mb-8 text-gray-400 space-y-4">
                    <p>A maioria dos escrit√≥rios que investe em marketing fecha entre 1% e 3% dos leads que recebe.</p>
                    <p class="text-white font-bold">Agora imagine:</p>
                </div>

                <!-- Calculator Widget -->
                <div class="p-8 bg-[#121212] rounded-xl border border-[#2A2A2A] shadow-inner">
                    <div class="grid md:grid-cols-2 gap-10 mb-8 items-center">
                        <div class="space-y-8 flex flex-col justify-center">
                            <div>
                                <label class="block text-xs font-bold text-gray-500 uppercase mb-3">Seu escrit√≥rio recebe: <span id="leads-display" class="text-white ml-2 text-lg">150 leads/m√™s</span></label>
                                <input type="range" id="leads-input" min="50" max="1000" step="10" value="150" class="w-full">
                                <div class="mt-2 text-xs text-gray-500">
                                    Com 2% de fechamento = <span id="contracts-current" class="text-red-400">3 contratos</span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-500 uppercase mb-3">Ticket M√©dio: <span id="ticket-display" class="text-white ml-2 text-lg">R$ 5.000</span></label>
                                <input type="range" id="ticket-input" min="1000" max="20000" step="500" value="5000" class="w-full">
                            </div>
                        </div>

                        <div class="flex flex-col justify-center bg-[#1A1A1A] p-6 rounded-lg border border-[#333]">
                            <span class="text-xs font-bold text-gray-500 uppercase mb-1">Se elevasse para 6% (SIC)</span>
                            <div class="text-lg text-gray-300 mb-2">
                                Passaria para <strong id="contracts-sic" class="text-white">9 contratos</strong>
                            </div>
                            <div class="mt-4 pt-4 border-t border-[#333]">
                                <span class="text-xs font-bold text-green-500 uppercase">Dinheiro deixado na mesa por ano</span>
                                <div id="revenue-loss" class="text-3xl font-black text-white">
                                    R$ 360.000
                                </div>
                                <p class="text-xs text-gray-500 mt-2">Sem aumentar investimento.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-8 text-gray-400 space-y-6">
                    <p>O problema nunca foi falta de lead. Foi aceitar como ‚Äúnormal‚Äù fechar 1% ou 2%. <br/>
                    <span class="text-[#ff7a01] font-bold">Normal n√£o significa eficiente. Comum n√£o escala.</span></p>
                </div>
            </section>

            <!-- COMO FUNCIONA O SIC -->
            <section class="mb-16 bg-[#121212] p-8 rounded-lg border border-[#262626]">
                <h3 class="text-xl font-bold text-white mb-6">O SIC foi criado exatamente para resolver esse gargalo:</h3>
                <ul class="space-y-4 text-gray-300">
                    <li class="flex gap-3"><i data-lucide="check-circle-2" class="text-[#ff7a01] shrink-0"></i> A IA atende no minuto certo.</li>
                    <li class="flex gap-3"><i data-lucide="check-circle-2" class="text-[#ff7a01] shrink-0"></i> Qualifica com crit√©rios objetivos.</li>
                    <li class="flex gap-3"><i data-lucide="check-circle-2" class="text-[#ff7a01] shrink-0"></i> Avan√ßa a conversa com dire√ß√£o estrat√©gica.</li>
                    <li class="flex gap-3"><i data-lucide="check-circle-2" class="text-[#ff7a01] shrink-0"></i> Organiza cada oportunidade dentro de um CRM propriet√°rio.</li>
                </ul>
                <p class="mt-8 text-center text-lg font-bold text-white uppercase tracking-wide">
                    N√£o √© sobre ter mais contatos. <br/>
                    √â sobre transformar contatos em contratos.
                </p>
            </section>

            <!-- CRONOGRAMA -->
            <section class="mb-20">
                <h2 class="text-2xl font-bold text-white mb-8">Previsibilidade em at√© 41 dias ‚Äî por que funciona</h2>
                <div class="space-y-8 pl-4 border-l-2 border-[#262626]">
                    <div class="relative pl-6">
                        <div class="absolute -left-[9px] top-1 w-4 h-4 rounded-full bg-[#331a00] border-2 border-[#ff7a01]"></div>
                        <h4 class="text-white font-bold mb-2">Primeiros dias</h4>
                        <p class="text-gray-500">Implementa√ß√£o estrat√©gica e ativa√ß√£o do sistema.</p>
                    </div>
                    <div class="relative pl-6">
                        <div class="absolute -left-[9px] top-1 w-4 h-4 rounded-full bg-[#331a00] border-2 border-[#ff7a01]"></div>
                        <h4 class="text-white font-bold mb-2">Na sequ√™ncia</h4>
                        <p class="text-gray-500">Capta√ß√£o + atendimento imediato + qualifica√ß√£o + condu√ß√£o estruturada.</p>
                    </div>
                    <div class="relative pl-6">
                        <div class="absolute -left-[9px] top-1 w-4 h-4 rounded-full bg-green-900 border-2 border-green-500"></div>
                        <h4 class="text-white font-bold mb-2">Resultado</h4>
                        <p class="text-gray-500">Quando o processo deixa de ser improvisado e passa a ser sist√™mico, o ciclo de fechamento encurta. <strong class="text-green-500">Contratos previs√≠veis em at√© 41 dias.</strong></p>
                    </div>
                </div>
            </section>

            <!-- FOUNDER -->
            <section class="mb-16 py-10 bg-[#121212] -mx-6 md:-mx-16 px-6 md:px-16 border-y border-[#262626]">
                <h2 class="text-2xl font-bold text-white mb-8 text-center md:text-left">Quem est√° por tr√°s da Advanx IA</h2>
                <div class="flex flex-col md:flex-row gap-8 items-center">
                    <!-- FOTO INTERATIVA -->
                    <div id="founder-photo" class="w-32 h-32 bg-gray-800 rounded-full overflow-hidden flex-shrink-0 shadow-[0_0_20px_rgba(255,122,1,0.2)] cursor-pointer active:scale-95 transition-transform">
                        <img 
                           src="https://lhbwfbquxkutcyqazpnw.supabase.co/storage/v1/object/public/images/outro/eu-escritorio.webp" 
                           alt="Rafael Batista" 
                           loading="lazy"
                           width="128"
                           height="128"
                           class="w-full h-full object-cover object-top"
                        />
                    </div>
                    
                    <div class="flex-1 text-center md:text-left">
                        <p class="text-gray-300 mb-4 text-lg">
                            A empresa foi idealizada por <strong class="text-white">Rafael Batista (@rafaelbatistaz)</strong>.
                        </p>
                        <p class="text-gray-400 mb-6">
                            H√° mais de 5 anos atuando exclusivamente com advogados, desenvolvendo estruturas de aquisi√ß√£o voltadas para o mercado jur√≠dico.
                        </p>
                        <div class="bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A] mb-6 hover:border-[#ff7a01]/40 transition-colors inline-block md:block w-full">
                            <h4 class="text-[#ff7a01] font-bold mb-2 text-sm uppercase">J√° s√£o:</h4>
                            <ul class="text-gray-400 space-y-1 text-left">
                                <li>‚Ä¢ Mais de 400 escrit√≥rios atendidos</li>
                                <li>‚Ä¢ Grandes nomes como Professor Alexandre Mazza</li>
                                <li>‚Ä¢ Audi√™ncia 4.0</li>
                                <li>‚Ä¢ Weinmann & Colbeich</li>
                            </ul>
                        </div>
                        <div class="text-gray-300 space-y-4 font-medium text-left">
                            <p>Advanx IA n√£o √© uma prestadora de servi√ßo. <strong class="text-white">√â engenharia de aquisi√ß√£o jur√≠dica.</strong></p>
                            <p class="text-[#ff7a01] font-bold">Nosso foco √© um s√≥: Contrato fechado.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- GARANTIA -->
            <section class="mb-12 text-center border border-green-900/30 bg-green-900/10 p-8 rounded-xl">
                <i data-lucide="shield-check" class="text-green-500 mx-auto mb-4 w-12 h-12"></i>
                <h2 class="text-2xl font-black text-white mb-4">Garantia Direta</h2>
                <p class="text-lg text-gray-300 mb-2">Contratos fechados em at√© 41 dias.</p>
                <p class="text-lg text-gray-300 mb-6">Se n√£o acontecer, voc√™ fica <strong class="text-green-400">isento da mensalidade.</strong></p>
                <p class="text-sm text-gray-500">Simples. Quando existe sistema, existe seguran√ßa para garantir.</p>
            </section>

            <!-- CTA FINAL -->
            <section class="text-center py-8">
                <h2 class="text-3xl font-black text-white mb-6">A decis√£o √© estrat√©gica</h2>
                <p className="text-lg text-gray-400 mb-4 max-w-2xl mx-auto">
                    Voc√™ pode continuar aceitando que ‚Äú√© normal fechar pouco‚Äù.
                    Ou pode implementar um Sistema de Capta√ß√£o Inteligente que transforma aquisi√ß√£o em processo controlado.
                </p>
                
                <button onclick="openForm()" class="group relative inline-flex items-center justify-center w-full md:w-auto px-10 py-5 font-bold text-white transition-all duration-300 bg-gradient-to-r from-[#ff7a01] to-[#cc6200] rounded-sm hover:brightness-110 focus:outline-none ring-offset-2 ring-offset-[#0A0A0A] focus:ring-2 focus:ring-[#ff7a01] shadow-[0_0_20px_rgba(255,122,1,0.3)] hover:shadow-[0_0_30px_rgba(255,122,1,0.5)] cursor-pointer">
                    IMPLEMENTAR SIC NO MEU ESCRIT√ìRIO
                    <i data-lucide="arrow-right" class="ml-3 group-hover:translate-x-1 transition-transform"></i>
                </button>

                <div class="mt-12 text-gray-600 text-sm font-mono uppercase tracking-widest">
                    Advanx IA<br/>SIC ‚Äî Sistema de Capta√ß√£o Inteligente
                </div>
            </section>

            <div class="mt-8 pt-4 border-t border-[#262626] text-center text-xs text-gray-700 font-mono">
                SYSTEM STATUS: ONLINE // SECURE CONNECTION
            </div>
        </div>
    </main>

    <!-- Floating Button Mobile -->
    <div class="md:hidden fixed bottom-6 right-6 z-30">
        <button onclick="openForm()" class="bg-[#ff7a01] text-white p-4 rounded-full shadow-2xl shadow-[#ff7a01]/50 animate-pulse">
            <i data-lucide="message-circle" class="w-6 h-6"></i>
        </button>
    </div>

    <!-- TYPEFORM MODAL OVERLAY -->
    <div id="form-modal" class="fixed inset-0 z-50 bg-[#0A0A0A] hidden flex-col">
        <!-- Progress Header -->
        <div class="px-6 py-4 flex justify-between items-center border-b border-[#222]">
            <div class="flex items-center gap-2 text-gray-500 text-sm font-mono">
                <span id="step-number" class="text-[#ff7a01] font-bold">1</span> / 9
            </div>
            <!-- Bot√£o fechar removido conforme solicitado -->
        </div>
        
        <!-- Progress Bar -->
        <div class="w-full h-1 bg-[#1E1E1E]">
            <div id="progress-bar" class="h-full bg-[#ff7a01] transition-all duration-500 ease-out" style="width: 10%"></div>
        </div>

        <!-- Content Container -->
        <div class="flex-1 flex items-center justify-center p-6 md:p-12 overflow-y-auto">
            <div id="form-container" class="w-full max-w-3xl fade-in">
                <!-- Conte√∫do injetado via JS -->
            </div>
        </div>

        <div class="md:hidden p-4 text-center text-xs text-gray-600 border-t border-[#222]">
            Toque nas op√ß√µes ou pressione enter
        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // CONFIGURA√á√ïES
        const WHATSAPP_NUMBER = "5571982470873";
        
        // --- CALCULADORA ---
        const leadsInput = document.getElementById('leads-input');
        const ticketInput = document.getElementById('ticket-input');
        const leadsDisplay = document.getElementById('leads-display');
        const ticketDisplay = document.getElementById('ticket-display');
        const contractsCurrent = document.getElementById('contracts-current');
        const contractsSic = document.getElementById('contracts-sic');
        const revenueLoss = document.getElementById('revenue-loss');

        function updateCalculator() {
            const leads = parseInt(leadsInput.value);
            const ticket = parseInt(ticketInput.value);

            leadsDisplay.innerText = `${leads} leads/m√™s`;
            ticketDisplay.innerText = `R$ ${ticket.toLocaleString('pt-BR')}`;

            const current = Math.floor(leads * 0.02);
            const sic = Math.floor(leads * 0.06);
            const gain = ((sic - current) * ticket) * 12;

            contractsCurrent.innerText = `${current} contratos`;
            contractsSic.innerText = `${sic} contratos`;
            revenueLoss.innerText = `R$ ${gain.toLocaleString('pt-BR')}`;
        }

        leadsInput.addEventListener('input', updateCalculator);
        ticketInput.addEventListener('input', updateCalculator);

        // --- MENU SECRETO ---
        let secretClicks = 0;
        document.getElementById('founder-photo').addEventListener('click', () => {
            secretClicks++;
            if (secretClicks === 3) {
                setTimeout(() => {
                    const pass = prompt("üîí Acesso Admin\nDigite a senha:");
                    if (pass === "2112") {
                        const current = localStorage.getItem('advanx_webhook_url') || "";
                        const url = prompt("üîó Configurar Webhook URL:", current);
                        if (url !== null) {
                            localStorage.setItem('advanx_webhook_url', url);
                            alert("‚úÖ Salvo!");
                        }
                    } else if (pass !== null) alert("‚ùå Senha incorreta.");
                    secretClicks = 0;
                }, 200);
            }
            setTimeout(() => secretClicks = 0, 2000);
        });

        // --- FORMUL√ÅRIO (STATE MACHINE) ---
        const modal = document.getElementById('form-modal');
        const container = document.getElementById('form-container');
        const stepNum = document.getElementById('step-number');
        const progressBar = document.getElementById('progress-bar');
        
        let step = 0;
        let answers = {
            nome: '', telefone: '', email: '', faturamento: '', 
            instagram: '', ia: '', trafego: '', desafio: '', prazo: ''
        };

        const questions = [
            // 0: Nome
            {
                render: () => `
                    <label class="block text-2xl md:text-3xl font-bold text-white mb-8">Como podemos te chamar?</label>
                    <input id="inp-nome" type="text" placeholder="Digite seu nome completo..." class="w-full bg-transparent border-b-2 border-gray-700 text-2xl md:text-4xl text-[#ff7a01] focus:border-[#ff7a01] outline-none py-4 placeholder-gray-700 transition-all" value="${answers.nome}">
                    <button onclick="nextStep()" class="mt-12 bg-[#ff7a01] hover:bg-[#cc6200] text-white px-8 py-3 rounded text-lg font-bold flex items-center gap-2 cursor-pointer">OK <i data-lucide="check-circle-2"></i></button>
                `,
                validate: () => {
                    const val = document.getElementById('inp-nome').value;
                    if(!val) return alert("Preencha seu nome");
                    answers.nome = val;
                    return true;
                }
            },
            // 1: Telefone
            {
                render: () => `
                    <label class="block text-2xl md:text-3xl font-bold text-white mb-8">Seu WhatsApp para contato</label>
                    <input id="inp-tel" type="tel" placeholder="(00) 00000-0000" class="w-full bg-transparent border-b-2 border-gray-700 text-2xl md:text-4xl text-[#ff7a01] focus:border-[#ff7a01] outline-none py-4 placeholder-gray-700 transition-all" value="${answers.telefone}" oninput="maskPhone(this)">
                    <button onclick="nextStep()" class="mt-12 bg-[#ff7a01] hover:bg-[#cc6200] text-white px-8 py-3 rounded text-lg font-bold flex items-center gap-2 cursor-pointer">OK <i data-lucide="check-circle-2"></i></button>
                `,
                validate: () => {
                    const val = document.getElementById('inp-tel').value;
                    if(val.length < 14) return alert("Telefone inv√°lido");
                    answers.telefone = val;
                    return true;
                }
            },
            // 2: Email
            {
                render: () => `
                    <label class="block text-2xl md:text-3xl font-bold text-white mb-8">Seu melhor email corporativo</label>
                    <input id="inp-email" type="email" placeholder="nome@seuadvogado.com" class="w-full bg-transparent border-b-2 border-gray-700 text-2xl md:text-4xl text-[#ff7a01] focus:border-[#ff7a01] outline-none py-4 placeholder-gray-700 transition-all" value="${answers.email}">
                    <button onclick="nextStep()" class="mt-12 bg-[#ff7a01] hover:bg-[#cc6200] text-white px-8 py-3 rounded text-lg font-bold flex items-center gap-2 cursor-pointer">OK <i data-lucide="check-circle-2"></i></button>
                `,
                validate: () => {
                    const val = document.getElementById('inp-email').value;
                    if(!val.includes('@')) return alert("Email inv√°lido");
                    answers.email = val;
                    return true;
                }
            },
            // 3: Faturamento
            {
                type: 'choice',
                label: 'M√©dia de faturamento mensal',
                key: 'faturamento',
                options: ["0 a 10 mil reais", "10 a 20 mil reais", "20 a 50 mil reais", "+ de 50 mil reais"]
            },
            // 4: Instagram
            {
                render: () => `
                    <label class="block text-2xl md:text-3xl font-bold text-white mb-8">Qual seu Instagram pessoal ou profissional?</label>
                    <div class="flex items-center border-b-2 border-gray-700 focus-within:border-[#ff7a01] transition-all">
                        <span class="text-2xl md:text-4xl text-gray-500 mr-2">@</span>
                        <input id="inp-insta" type="text" placeholder="seu.usuario" class="w-full bg-transparent border-none text-2xl md:text-4xl text-[#ff7a01] outline-none py-4 placeholder-gray-700" value="${answers.instagram}">
                    </div>
                    <button onclick="nextStep()" class="mt-12 bg-[#ff7a01] hover:bg-[#cc6200] text-white px-8 py-3 rounded text-lg font-bold flex items-center gap-2 cursor-pointer">OK <i data-lucide="check-circle-2"></i></button>
                `,
                validate: () => {
                    const val = document.getElementById('inp-insta').value;
                    if(!val) return alert("Preencha seu Instagram");
                    answers.instagram = val;
                    return true;
                }
            },
            // 5: IA
            {
                type: 'choice',
                label: 'J√° utiliza Intelig√™ncia Artificial e automa√ß√µes?',
                key: 'ia',
                options: ["Sim, utilizo IA e Automa√ß√µes", "Sim, Apenas IA", "Sim, Apenas Automa√ß√µes", "N√£o utilizo"]
            },
            // 6: Trafego
            {
                type: 'choice',
                label: 'Voc√™ j√° faz tr√°fego pago?',
                key: 'trafego',
                options: ["Sim, fa√ßo tr√°fego pago", "N√£o estou fazendo no momento", "Nunca fiz"]
            },
            // 7: Desafio
            {
                type: 'choice',
                label: 'Qual seu maior desafio atual?',
                key: 'desafio',
                options: [
                    "N√£o recebo contatos, preciso de demanda.",
                    "Recebo contatos, mas convers√£o √© baixa.",
                    "Recebo contatos, mas muitos curiosos.",
                    "Quero usar IA para peti√ß√µes/contratos.",
                    "Quero automatizar o comercial inteiro."
                ]
            },
            // 8: Prazo
            {
                type: 'choice',
                label: 'Quando pretende resolver esse problema?',
                key: 'prazo',
                options: ["O Mais r√°pido poss√≠vel", "Em at√© 30 dias", "Ainda n√£o sei, n√£o √© t√£o urgente"]
            }
        ];

        function openForm() {
            modal.style.display = 'flex';
            trackEvent('InitiateCheckout');
            renderStep();
        }

        function maskPhone(el) {
            let v = el.value.replace(/\D/g, "");
            v = v.replace(/^(\d\d)(\d)/g, "($1) $2");
            v = v.replace(/(\d{5})(\d)/, "$1-$2");
            el.value = v.slice(0, 15);
        }

        function renderStep() {
            if (step >= questions.length) {
                finishForm();
                return;
            }

            const q = questions[step];
            let html = '';

            if (q.type === 'choice') {
                html = `
                    <label class="block text-2xl md:text-3xl font-bold text-white mb-8">${q.label}</label>
                    <div class="space-y-4">
                        ${q.options.map((opt, i) => `
                            <button onclick="selectOption('${q.key}', '${opt}')" class="block w-full text-left p-6 border border-gray-700 rounded hover:border-[#ff7a01] hover:bg-[#1E1E1E] transition-all text-xl text-gray-300 font-medium group cursor-pointer">
                                <span class="bg-gray-800 text-xs px-2 py-1 rounded text-gray-500 group-hover:bg-[#331a00] group-hover:text-[#ff7a01] mr-3">${String.fromCharCode(65+i)}</span>
                                ${opt}
                            </button>
                        `).join('')}
                    </div>
                `;
            } else {
                html = q.render();
            }

            container.innerHTML = html;
            
            // Refresh Icons
            lucide.createIcons();

            // Progress Update
            stepNum.innerText = step + 1;
            progressBar.style.width = `${((step + 1) / 9) * 100}%`;
            
            // Auto-focus input if exists
            const inp = container.querySelector('input');
            if(inp) inp.focus();
        }

        function nextStep() {
            if (questions[step].validate && !questions[step].validate()) return;
            step++;
            renderStep();
        }

        function selectOption(key, value) {
            answers[key] = value;
            step++;
            renderStep();
        }

        async function finishForm() {
            // Enviar para Webhook
            const url = localStorage.getItem('advanx_webhook_url');
            if (url) {
                const formattedPhone = `55${answers.telefone.replace(/\D/g, '')}`;
                try {
                    fetch(url, {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({...answers, telefone: formattedPhone, submittedAt: new Date().toISOString()}),
                        mode: 'no-cors'
                    });
                } catch(e) { console.error(e); }
            }

            // L√≥gica Final
            const isDesqualificado = answers.prazo.includes("Ainda n√£o sei");
            
            if (isDesqualificado) {
                container.innerHTML = `
                    <div class="fade-in text-center max-w-2xl mx-auto">
                        <div class="mb-6 flex justify-center"><i data-lucide="alert-triangle" class="text-yellow-500 w-16 h-16"></i></div>
                        <h2 class="text-3xl md:text-4xl font-bold text-white mb-6">Perfeito. Essa resposta nos poupa tempo.</h2>
                        <div class="text-left bg-[#1E1E1E] p-8 rounded border-l-4 border-yellow-500 mb-8 space-y-4 text-gray-400 text-lg">
                            <p>O que fazemos aqui exige convic√ß√£o, n√£o curiosidade.</p>
                            <p class="font-bold text-white">Quando estiver pronto para parar de fingir que est√° tudo sob controle, a conversa existe.</p>
                        </div>
                        <a href="https://instagram.com/rafaelbatistaz" target="_blank" class="bg-transparent border-2 border-gray-600 text-white hover:bg-white hover:text-black px-8 py-3 rounded-full font-bold transition-all inline-flex items-center gap-2">Voltar para o Instagram <i data-lucide="arrow-right"></i></a>
                    </div>
                `;
            } else {
                // Pixel Lead
                const fatIndex = ["0 a 10", "10 a 20", "20 a 50", "+ de 50"].findIndex(x => answers.faturamento.includes(x));
                if (fatIndex >= 2) {
                    trackEvent('Lead', { value: 0, currency: "BRL", content_name: "High Ticket" });
                } else {
                    trackEvent('SubmitApplication');
                }

                container.innerHTML = `
                    <div class="fade-in text-center max-w-2xl mx-auto">
                        <div class="mb-6 flex justify-center"><i data-lucide="check-circle-2" class="text-green-500 w-20 h-20"></i></div>
                        <h2 class="text-3xl font-bold text-white mb-4">Voc√™ tem o perfil que buscamos.</h2>
                        <div class="bg-[#1E1E1E] p-6 rounded border border-[#333] mb-8 text-gray-400 text-lg leading-relaxed text-left">
                            <p class="mb-4">A partir daqui, a conversa √© objetiva. Vou te mostrar como nosso sistema assume o atendimento inicial e te entrega apenas contratos.</p>
                        </div>
                        <button onclick="sendWhatsapp()" class="w-full bg-green-600 hover:bg-green-500 text-white p-5 rounded font-bold text-xl shadow-lg hover:shadow-green-900/50 transition-all flex items-center justify-center gap-3 animate-pulse cursor-pointer">
                            <i data-lucide="smartphone"></i> FALAR NO WHATSAPP AGORA
                        </button>
                    </div>
                `;
            }
            lucide.createIcons();
            stepNum.parentElement.style.display = 'none'; // Hide counter
        }

        function sendWhatsapp() {
            const text = `*NOVO LEAD - ADVANX IA*\n---------------------\nüë§ *Nome:* ${answers.nome}\nüì± *Tel:* ${answers.telefone}\nüìß *Email:* ${answers.email}\nüì∏ *Insta:* ${answers.instagram}\nüí∞ *Fat:* ${answers.faturamento}\nü§ñ *Usa IA:* ${answers.ia}\nüì¢ *Tr√°fego:* ${answers.trafego}\nüéØ *Desafio:* ${answers.desafio}\n‚è∞ *Prazo:* ${answers.prazo}\n---------------------`;
            window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(text)}`, '_blank');
        }

        // Init Icons
        lucide.createIcons();
        
        // Scroll Track
        let hasScrolled = false;
        window.addEventListener('scroll', () => {
            if(!hasScrolled && window.scrollY > 300) {
                hasScrolled = true;
                trackEvent('ViewContent');
            }
        });
    </script>
</body>
</html>
